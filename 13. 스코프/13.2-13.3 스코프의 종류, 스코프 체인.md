# 13.2 스코프의 종류

- 코드는 **전역**과 **지역**으로 구분된다.
  | 구분 | 설명 | 스코프 | 변수 |
  | ---- | --------------------- | ----------- | --------- |
  | 전역 | 코드의 가장 바깥 영역 | 전역 스코프 | 전역 변수 |
  | 지역 | 함수 몸체 내부 | 지역 스코프 | 지역 변수 |

### 13.2.1 전역과 전역 스코프

- 전역 변수는 함수 내부 포함, 어디서든지 참조할 수 있다.

### 13.2.2 지역과 지역 스코프

- 지역은 함수 몸체 내부를 말한다.
- 지역 변수는 자신의 지역 스코프와 하위 지역 스코프에서 유효하다.
- **같은 이름의 전역 변수가 있어도 함수 내부에서 선언된 지역 변수를 참조하는 이유는, 자바스크립트 엔진이 스코프 체인을 통해 참조할 변수를 검색했기 때문이다.**

# 13.3 스코프 체인

- `중첩 함수` : 함수 몸체 내부에서 정의한 함수
- `외부 함수` : 중첩 함수를 포함한 함수
- `스코프 체인` : **스코프가 계층적으로 연결된 것.** 함수가 중첩될 수 있는 것처럼, 지역 스코프도 중첩될 수 있다. 스코프는 함수의 중첩에 의해 **계층적 구조**를 갖는다.
  - 변수를 참조할 때 자바스크립트 엔진은 스코프 체인을 통해 **변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며** 선언된 변수를 검색한다.
- 렉시컬 환경
  - 자바스크립트 엔진은 코드 실행 전, 자료구조 렉시컬 환경을 생성한다. 변수 선언이 실행되면 이 자료구조에 식별자가 키로 등록되고, 변수 할당이 일어나면 식별자에 해당하는 값을 변경한다. 변수의 검색도 이 자료구조 상에서 일어난다.
  - 스코프 체인은 실행 컨텍스트의 렉시컬 환경을 **단방향**으로 연결한 것이다. `전역 렉시컬 환경`은 **코드가 로드되면 곧바로 생성**되고, `함수의 렉시컬 환경`은 **함수가 호출되면 곧바로 생성**된다. (\* 23장 실행 컨텍스트 참조.)

### 13.3.1 스코프 체인에 의한 변수 검색

- 자바스크립트 엔진은 절대 하위 스코프로 내려가면서 시별자를 검색하지 않는다.
- **상위 스코프에서 유효한 변수는 하위 스코프에서 자유롭게 참조할수있지만 하위 스코프에서 유효한 변수를 상위 스코프에서 참조할 수 없다.**

### 13.3.2 스코프 체인에 의한 함수 검색

- 함수도 식별자에 할당되기 때문에 스코프를 갖는다.
